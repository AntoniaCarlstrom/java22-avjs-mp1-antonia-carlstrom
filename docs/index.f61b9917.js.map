{"mappings":"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","sources":["src/modules/firebaseModule.js","src/main.js"],"sourcesContent":["//Hämtar highscore-listan från firebase\r\nasync function getFirebase() {\r\n  try {\r\n    const url = 'https://highscore-f90ba-default-rtdb.europe-west1.firebasedatabase.app/highscores.json';\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    const highscoreDiv = document.getElementById('high-score');\r\n    highscoreDiv.innerHTML = \"\";\r\n    //Sorterar arrayen\r\n    const jsonArray = Object.values(data);\r\n    jsonArray.sort((a, b) => a.score - b.score);\r\n    jsonArray.reverse();\r\n    //Behåller de 5 första positionerna\r\n    const finalArray = jsonArray.slice(0, 5);\r\n    //Visar highscore-listan på sidan\r\n    const highscoreList = document.querySelector('#high-score');\r\n\r\n    for (const key in finalArray) {\r\n\r\n      const user = finalArray[key];\r\n\r\n      const highScore = document.createElement('ul');\r\n      highScore.classList.add('highscore-list');\r\n\r\n      const userName = document.createElement('li');\r\n      userName.textContent = \"Name: \" + user.name;\r\n      highScore.appendChild(userName);\r\n\r\n      const score = document.createElement('li');\r\n      score.textContent = \"Score: \" + user.score;\r\n      highScore.appendChild(score);\r\n\r\n      highscoreList.appendChild(highScore);\r\n\r\n    }\r\n    return finalArray;\r\n  } catch (error) {\r\n    console.error('Error getting data from Firebase:', error);\r\n  }\r\n\r\n}\r\n\r\n//Funktion för att skicka ny highscore till firebase\r\nasync function patchToFirebase(finalArray) {\r\n  //Arrayen sorteras och kapas av\r\n  let finalArraySorted = Object.values(finalArray);\r\n  finalArraySorted.sort((a, b) => a.score - b.score);\r\n  finalArraySorted.reverse();\r\n\r\n  let finalArraySliced = finalArraySorted.slice(0, 5);\r\n\r\n\r\n  //Skickar upp arrayen med objekten till sin rätta plats i firebase\r\n  for (let i = 0; i < finalArraySliced.length; i++) {\r\n    const url = `https://highscore-f90ba-default-rtdb.europe-west1.firebasedatabase.app/highscores/${i}.json`;\r\n\r\n\r\n    const newScore = {\r\n      name: finalArraySliced[i].name,\r\n      score: finalArraySliced[i].score\r\n    }\r\n\r\n    const options = {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(newScore),\r\n      headers: {\r\n        \"Content-type\": \"application/json; charset=UTF-8\"\r\n      }\r\n    }\r\n\r\n    const response = await fetch(url, options);\r\n    const data = await response.json();\r\n\r\n  }\r\n}\r\n\r\nexport { getFirebase, postFirebase, patchToFirebase }\r\n","import { getFirebase, patchToFirebase } from \"./modules/firebaseModule.js\";\r\n\r\nconst playerText = document.querySelector(\".playerText\");\r\nconst playerName = document.querySelector(\".playerName\");\r\nconst computerText = document.querySelector(\".computerText\");\r\nconst resultText = document.querySelector(\".resultText\");\r\nconst resultText2 = document.querySelector(\".resultText2\");\r\nconst choiceBtns = document.querySelectorAll(\".choiceBtn\");\r\nconst nameButton = document.querySelector(\".nameBtn\");\r\nconst scorePlayerDiv = document.querySelector(\".scorePlayerDiv\");\r\nconst scoreComputerDiv = document.querySelector(\".scoreComputerDiv\");\r\nconst form = document.querySelector(\"form\");\r\nconst overlay = document.querySelector(\".overlay\");\r\n\r\nlet player;\r\nlet computer;\r\nlet scorePlayer = 0;\r\nlet scoreComputer = 0;\r\nlet playerNameFromInput = \"\";\r\nlet nameInput;\r\nlet finalArray = [];\r\n\r\n\r\ngetFirebase()\r\n  .then(function (returnedValueFromGetFirebase) {\r\n    finalArray = returnedValueFromGetFirebase;\r\n  });\r\n//Sätter spelarens namn\r\nnameButton.addEventListener(\"click\", (event) => {\r\n  event.preventDefault();\r\n  nameInput = document.querySelector(\"form input\");\r\n  playerNameFromInput = nameInput.value;\r\n  playerName.textContent = playerNameFromInput + \":\";\r\n  form.style.visibility = \"hidden\";\r\n});\r\n\r\n\r\n//Lägger till eventlisteners\r\nchoiceBtns.forEach((button) =>\r\n\r\n  button.addEventListener(\"click\", (event) => {\r\n    event.preventDefault();\r\n    player = button.textContent;\r\n    computerTurn();\r\n    playerText.textContent = `${player}`;\r\n    computerText.textContent = `${computer}`;\r\n    resultText.textContent = checkWinner();\r\n    //Spelet \r\n    if (resultText.textContent == \"You lose!\") {\r\n      scoreComputer++;\r\n      resultText2.textContent = `Game over! Computer wins!`;\r\n      overlay.classList.remove(\"hidden\");\r\n      //Skapar objekt med ny highscore med namn från input och poäng\r\n      let newHighscore = {\r\n        name: playerNameFromInput,\r\n        score: scorePlayer\r\n      }\r\n      //Resettar spelet efter 1 sekund\r\n      setTimeout(resetGame, 1000);\r\n      //Kollar om ny highscore är högre än sista platsen på listan, och lägger i så fall till den i arrayen\r\n      if (scorePlayer > finalArray[4].score)\r\n        finalArray.push(newHighscore);\r\n\r\n      //Arrayen patchas till firebase\r\n      patchToFirebase(finalArray);\r\n\r\n\r\n    } else if (resultText.textContent == \"You win!\") {\r\n      scorePlayer++;\r\n\r\n      resultText2.textContent = `Player wins! ${scorePlayer} points`;\r\n\r\n    }\r\n    //Ändrar texten score för player och dator\r\n    scorePlayerDiv.textContent = `Score: ${scorePlayer}`;\r\n    scoreComputerDiv.textContent = `Score: ${scoreComputer}`;\r\n\r\n\r\n\r\n  })\r\n);\r\n\r\n//Genererar datorns omgång\r\nfunction computerTurn() {\r\n  const randomNumber = Math.floor(Math.random() * 3) + 1;\r\n\r\n  switch (randomNumber) {\r\n    case 1:\r\n      computer = \"STEN\";\r\n      break;\r\n    case 2:\r\n      computer = \"SAX\";\r\n      break;\r\n    case 3:\r\n      computer = \"PÅSE\";\r\n      break;\r\n  }\r\n}\r\n//Kollar vem som vann\r\nfunction checkWinner() {\r\n  if (player == computer) {\r\n    return \"Oavgjort!\";\r\n  } else if (computer == \"STEN\") {\r\n    return player == \"SAX\" ? \"You lose!\" : \"You win!\";\r\n  } else if (computer == \"SAX\") {\r\n    return player == \"PÅSE\" ? \"You lose!\" : \"You win!\";\r\n  } else if (computer == \"PÅSE\") {\r\n    return player == \"STEN\" ? \"You lose!\" : \"You win!\";\r\n  }\r\n}\r\n//Resettar spelet om datorn vunnit\r\n\r\nfunction resetGame() {\r\n  scorePlayer = 0;\r\n  scoreComputer = 0;\r\n  resultText.textContent = \"\";\r\n  resultText2.textContent = \"\";\r\n  overlay.classList.add(\"hidden\");\r\n  form.classList.remove('hidden');\r\n  getFirebase();\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["async","$cc9ae9fc7a5419b7$export$7a667d08ed65fa47","url","response","fetch","data","json","document","getElementById","innerHTML","jsonArray","Object","values","sort","a","b","score","reverse","finalArray","slice","highscoreList","querySelector","key","user","highScore","createElement","classList","add","userName","textContent","name","appendChild","error","console","$cc9ae9fc7a5419b7$export$e96c0a32585e1110","finalArraySorted","finalArraySliced","i","length","newScore","options","method","body","JSON","stringify","headers","$2b6e161c9edcf319$var$playerText","$2b6e161c9edcf319$var$playerName","$2b6e161c9edcf319$var$computerText","$2b6e161c9edcf319$var$resultText","$2b6e161c9edcf319$var$resultText2","$2b6e161c9edcf319$var$choiceBtns","querySelectorAll","$2b6e161c9edcf319$var$nameButton","$2b6e161c9edcf319$var$scorePlayerDiv","$2b6e161c9edcf319$var$scoreComputerDiv","$2b6e161c9edcf319$var$form","$2b6e161c9edcf319$var$overlay","$2b6e161c9edcf319$var$player","$2b6e161c9edcf319$var$computer","$2b6e161c9edcf319$var$nameInput","$2b6e161c9edcf319$var$scorePlayer","$2b6e161c9edcf319$var$scoreComputer","$2b6e161c9edcf319$var$playerNameFromInput","$2b6e161c9edcf319$var$finalArray","$2b6e161c9edcf319$var$resetGame","remove","then","returnedValueFromGetFirebase","addEventListener","event","preventDefault","value","style","visibility","forEach","button","Math","floor","random","$2b6e161c9edcf319$var$computerTurn","$2b6e161c9edcf319$var$checkWinner","newHighscore","setTimeout","push"],"version":3,"file":"index.f61b9917.js.map"}